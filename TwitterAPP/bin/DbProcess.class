Êşº¾   4 ·  	DbProcess  DbConnection list Ljava/util/ArrayList; 	Signature )Ljava/util/ArrayList<Ljava/lang/String;>; <init> ()V Code
  
 	 
 LineNumberTable LocalVariableTable this LDbProcess; getTerm ()Ljava/util/ArrayList; +()Ljava/util/ArrayList<Ljava/lang/String;>;  java/util/ArrayList
  
	    
     getConn ()Ljava/sql/Connection;  !   java/sql/Connection " # createStatement ()Ljava/sql/Statement; % SELECT term FROM terms ' ) ( java/sql/Statement * + executeQuery ((Ljava/lang/String;)Ljava/sql/ResultSet; - term / 1 0 java/sql/ResultSet 2 3 	getString &(Ljava/lang/String;)Ljava/lang/String;
  5 6 7 add (Ljava/lang/Object;)Z / 9 : ; next ()Z
 = ? > java/sql/SQLException @ 
 printStackTrace st Ljava/sql/Statement; rs Ljava/sql/ResultSet; e Ljava/sql/SQLException; 
StackMapTable findId (Ljava/lang/String;)I 
Exceptions L  java/lang/ClassNotFoundException N SELECT id, term FROM terms
 P R Q java/lang/String S 7 equals U id / W X I getInt Ljava/lang/String; insertTweetAndTerm $(Ltwitter4j/Status;LDbConnection;I)Z ] _ ^ twitter4j/Status ` a getText ()Ljava/lang/String;
 P c d a toLowerCase
  f g h get (I)Ljava/lang/Object;
 P j k l contains (Ljava/lang/CharSequence;)Z
  n H I
   q 8INSERT INTO tweetandterm (tweetid, termid) values (?, ?)  s t u prepareStatement 0(Ljava/lang/String;)Ljava/sql/PreparedStatement; w y x java/sql/PreparedStatement z { setLong (IJ)V w } ~  
executeUpdate ()I
   ‚  size status Ltwitter4j/Status; dbConn LDbConnection; tweetid I termid j preparedStatement Ljava/sql/PreparedStatement; insertTweet 9(Ljava/lang/String;IILjava/lang/String;Ljava/util/Date;)Z  java/lang/StringBuilder ’ INSERT INTO 
  ” 	 • (Ljava/lang/String;)V
  — ˜ ™ append -(Ljava/lang/String;)Ljava/lang/StringBuilder; › 2 (userid, tweetid, text, date) values (?, ?, ?, ?)
    a toString w   ¡ ¢ 	setString (ILjava/lang/String;)V ¤ 
java/sql/Date w ¦ § ¨ setDate (ILjava/sql/Date;)V ª java/lang/Exception table userid text date Ljava/util/Date; ± java/util/Date getList
  ´ ²  
SourceFile DbProcess.java !                 	 
     /     *· ±           
                          ×     G*» Y· µ *¶ ¹  L+$¹ & M§ *´ ,,¹ . ¶ 4W,¹ 8 šÿê§ L+¶ <*´ °   : = =     & 	          !  1  :  >  B     *    G      % A B    C D  >  E F  G    ı ! ' /ÿ     =   H I  J     K =    æ     A*¶ ¹  M,M¹ & N§ -,¹ . +¶ O™ -T¹ V ¬-¹ 8 šÿâ§ M,¶ <¬    - : = . 7 : =     & 	   $ 
 %  '  ( % ) . ' 7 , ; - ? 0    4    A       A - Y  
 - A B   $ C D  ;  E F  G    ı  ' /ÿ    P  =   Z [  J     K   ‡     ƒ6§ h+¹ \ ¶ b*´ ¶ eÀ P¶ b¶ i™ G**´ ¶ eÀ P¶ m6,¶ op¹ r :…¹ v …¹ v ¹ |  § ¬„*´ ¶ €¡ÿ’§ 
:¶ <¬    g z = h w z =     .    6  7 $ 8 6 9 C : M ; X < h 6 w ? | @  C    R    ƒ       ƒ ƒ „    ƒ … †    ƒ ‡ ˆ  6 2 ‰ ˆ   t Š ˆ  C % ‹ Œ  |  E F  G   V ÿ    ]    ÿ _   ]  w  @ÿ     ]    ÿ    ]   =      J     K =        _*¶ » Y‘· “+¶ –š¶ –¶ œ¹ r :…¹ v …¹ v ¹ Ÿ À £¹ ¥ ¹ |  § ¬:¬    Z [ ©     * 
   J  K  J   L * M 4 N > O K P [ R ] V    H    _       _ « Y    _ ¬ ˆ    _ ‡ ˆ    _ ­ Y    _ ® ¯    ; ‹ Œ  G   " ü Y w@ÿ     P P °  ©A       (     *· oÀ °                 A ²      %     *· ³°                   µ    ¶
